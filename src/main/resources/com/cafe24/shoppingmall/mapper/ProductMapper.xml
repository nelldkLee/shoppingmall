<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cafe24.shoppingmall.mapper.ProductMapper">
	
	<insert id="insert" parameterType="productvo">
		INSERT INTO product(category_no, product_name, description, price, display, selling, regdate) 
			VALUES(#{categoryNo}, #{productName}, #{description}, #{price}, #{display}, #{selling}, now())
			
		<selectKey keyProperty="category_no" resultType="long" order="AFTER">
			select
			last_insert_id()
		</selectKey> 
	</insert>
	
	<select id="read" resultType="productvo" parameterType="long">
		SELECT 
			category_no categoryNo, product_name productName, description, price, display, selling, thumnail_path, regdate 
		FROM product WHERE product_no = #{no}
	</select>
	
	<update id="update" parameterType="productvo">
		UPDATE product 
			SET product_name = #{productName}, 
				description = #{description},
				price = #{price},
				display = #{display}, 
				selling = #{selling}
		WHERE product_no = #{productNo}
	</update>
	
	<delete id="delete" parameterType="long">
		DELETE from product WHERE product_no = #{no} 
	</delete>
	
	<select id="getList" parameterType="criteria" resultType="productvo">
		SELECT 
			category_no categoryNo, product_name productName, description, price, display, selling, thumnail_path, regdate 
		FROM product 
		ORDER BY product_no DESC LIMIT #{limitStart}, #{perPageSize}  
	</select>
	
	<select id="getTotal" resultType="int">
		SELECT count(*) from product
	</select>
	
</mapper>
